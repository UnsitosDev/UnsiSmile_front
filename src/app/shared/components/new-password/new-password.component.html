<div class="overlay" [class.visible]="isVisible" [class.hidden]="!isVisible">
  <div class="modal">
    <h2>Actualización de Seguridad</h2>
    <p>Para garantizar la seguridad de tu cuenta, por favor actualiza tu contraseña utilizando los siguientes campos.</p>

    <form (ngSubmit)="onSubmit()" #passwordForm="ngForm">
      <div *ngIf="errorMessage" class="error-message">
        <i class="fas fa-exclamation-circle"></i>
        {{ errorMessage }}
      </div>

      <div class="form-group">
        <label for="currentPassword">
          <i class="fas fa-lock"></i>
          Contraseña Actual
        </label>
        <div class="password-field">
          <input 
            [type]="showCurrentPassword ? 'text' : 'password'"
            id="currentPassword" 
            name="currentPassword" 
            [(ngModel)]="currentPassword"
            required
            placeholder="Ingresa tu contraseña actual"
          >
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility('current')">
            <i class="fas" [ngClass]="showCurrentPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="newPassword">
          <i class="fas fa-key"></i>
          Nueva Contraseña
        </label>
        <div class="password-field">
          <input 
            [type]="showNewPassword ? 'text' : 'password'"
            id="newPassword" 
            name="newPassword" 
            [(ngModel)]="newPassword"
            required
            placeholder="Ingresa tu nueva contraseña"
          >
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility('new')">
            <i class="fas" [ngClass]="showNewPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">
          <i class="fas fa-check-circle"></i>
          Confirmar Nueva Contraseña
        </label>
        <div class="password-field">
          <input 
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword" 
            name="confirmPassword" 
            [(ngModel)]="confirmPassword"
            required
            placeholder="Confirma tu nueva contraseña"
          >
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility('confirm')">
            <i class="fas" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
        </div>
      </div>

      <div class="buttons">
        <button type="submit" class="submit" [disabled]="!passwordForm.form.valid">
          <i class="fas fa-save"></i>
          Actualizar Contraseña
        </button>
      </div>
    </form>
  </div>
</div>
