<div>
    <div class="root custom-text">
      <mat-tab-group [(selectedIndex)]="value" (selectedIndexChange)="handleChange($event, value)">
        <mat-tab label="Adulto">
          <div class="odontogram-container">
            @if (data.adultArcade.tooths) {
              <div class="quadrants">
                <!-- Superior Row -->
                <div class="upper-row">
                  <!-- Cuadrante 1 (Superior Derecho) -->
                  <div class="quadrant right-quadrant">
                    @for (tooth of getQuadrantTeeth(data.adultArcade.tooths, 1); track tooth.idTooth) {
                      <app-students-tooth
                        [data]="tooth"
                        [index]="$index"
                        [marked]="data.marked"
                        (toggleTooth)="toggleTooth($event)"
                        (setFace)="setFace($event)"
                      />
                    }
                  </div>
                  <!-- Cuadrante 2 (Superior Izquierdo) -->
                  <div class="quadrant left-quadrant">
                    @for (tooth of getQuadrantTeeth(data.adultArcade.tooths, 2); track tooth.idTooth) {
                      <app-students-tooth
                        [data]="tooth"
                        [index]="$index"
                        [marked]="data.marked"
                        (toggleTooth)="toggleTooth($event)"
                        (setFace)="setFace($event)"
                      />
                    }
                  </div>
                </div>
                <!-- Lower Row -->
                <div class="lower-row">
                  <!-- Cuadrante 4 (Inferior Derecho) -->
                  <div class="quadrant right-quadrant">
                    @for (tooth of getQuadrantTeeth(data.adultArcade.tooths, 4); track tooth.idTooth) {
                      <app-students-tooth
                        [data]="tooth"
                        [index]="$index"
                        [marked]="data.marked"
                        (toggleTooth)="toggleTooth($event)"
                        (setFace)="setFace($event)"
                      />
                    }
                  </div>
                  <!-- Cuadrante 3 (Inferior Izquierdo) -->
                  <div class="quadrant left-quadrant">
                    @for (tooth of getQuadrantTeeth(data.adultArcade.tooths, 3); track tooth.idTooth) {
                      <app-students-tooth
                        [data]="tooth"
                        [index]="$index"
                        [marked]="data.marked"
                        (toggleTooth)="toggleTooth($event)"
                        (setFace)="setFace($event)"
                      />
                    }
                  </div>
                </div>
              </div>
            }
          </div>
        </mat-tab>
        <mat-tab label="Infantil">
          <div class="odontogram-container">
            @if (data.childrenArcade.tooths) {
              <div class="quadrants">
                <!-- Superior Row -->
                <div class="upper-row">
                  <!-- Cuadrante 1 (Superior Derecho) -->
                  <div class="quadrant right-quadrant">
                    @for (tooth of getQuadrantTeeth(data.childrenArcade.tooths, 5); track tooth.idTooth) {
                      <app-students-tooth
                        [data]="tooth"
                        [index]="$index"
                        [marked]="data.marked"
                        (toggleTooth)="toggleTooth($event)"
                        (setFace)="setFace($event)"
                      />
                    }
                  </div>
                  <!-- Cuadrante 2 (Superior Izquierdo) -->
                  <div class="quadrant left-quadrant">
                    @for (tooth of getQuadrantTeeth(data.childrenArcade.tooths, 6); track tooth.idTooth) {
                      <app-students-tooth
                        [data]="tooth"
                        [index]="$index"
                        [marked]="data.marked"
                        (toggleTooth)="toggleTooth($event)"
                        (setFace)="setFace($event)"
                      />
                    }
                  </div>
                </div>
                <!-- Lower Row -->
                <div class="lower-row">
                  <!-- Cuadrante 4 (Inferior Derecho) -->
                  <div class="quadrant right-quadrant">
                    @for (tooth of getQuadrantTeeth(data.childrenArcade.tooths, 8); track tooth.idTooth) {
                      <app-students-tooth
                        [data]="tooth"
                        [index]="$index"
                        [marked]="data.marked"
                        (toggleTooth)="toggleTooth($event)"
                        (setFace)="setFace($event)"
                      />
                    }
                  </div>
                  <!-- Cuadrante 3 (Inferior Izquierdo) -->
                  <div class="quadrant left-quadrant">
                    @for (tooth of getQuadrantTeeth(data.childrenArcade.tooths, 7); track tooth.idTooth) {
                      <app-students-tooth
                        [data]="tooth"
                        [index]="$index"
                        [marked]="data.marked"
                        (toggleTooth)="toggleTooth($event)"
                        (setFace)="setFace($event)"
                      />
                    }
                  </div>
                </div>
              </div>
            }
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>

    @if (toolbar.options) {
      <app-students-toolbar
        [toolbar]="toolbar"
        (handleAction)="handleAction($event)"
      />
    }

    <div class="button-container">
      <button (click)="previousTab()" type="button" mat-button matStepperNext><i class="fas fa-long-arrow-alt-left"></i> ANTERIOR </button>
      <div>
          <button type="button" (click)="store()" mat-button [disabled]="false"> AVANZAR Y GUARDAR <i class="fas fa-save"></i></button>
      </div>
    </div>
</div>