<mat-stepper linear #stepper>
  <mat-step>

    <form [formGroup]="formGroup">
      
      <ng-template matStepLabel>DATOS PERSONALES</ng-template>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6">
        @for (field of personal; track $index) {
          <app-field-component 
            [field]="field" 
            [formGroup]="formGroup" 
            [errors]="field.errorMessages"
            [fieldValue]="getFieldValue(field.name)"
          (setFieldValue)="onFieldValueChange($event)">
          </app-field-component>
        }      
      </div>
      <div class="button-container">
        <div></div>
        <button mat-button matStepperNext>SIGUIENTE <i class="fas fa-long-arrow-alt-right"></i></button>
      </div>
    </form>
  </mat-step>

  <mat-step>
    <form [formGroup]="formGroup">
      <ng-template matStepLabel>DOMICILIO</ng-template>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6">
        @for (field of address; track $index) {
          <app-field-component 
          [field]="field" 
          [formGroup]="formGroup" 
          [errors]="field.errorMessages"
          [fieldValue]="getFieldValue(field.name)"
          (setFieldValue)="onFieldValueChange($event)">
          </app-field-component>
        }
      </div>
      <div class="button-container">
        <button mat-button matStepperPrevious><i class="fas fa-long-arrow-alt-left"></i> ANTERIOR</button>
        <button mat-button matStepperNext>SIGUIENTE <i class="fas fa-long-arrow-alt-right"></i></button>
      </div>
    </form>
  </mat-step>

  <mat-step >
    <form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
      <ng-template matStepLabel>OTROS DATOS</ng-template>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6">
        @for (field of other; track $index) {
          <app-field-component 
          [field]="field" 
          [formGroup]="formGroup" 
          [errors]="field.errorMessages"
          [fieldValue]="getFieldValue(field.name)"
          (setFieldValue)="onFieldValueChange($event)">
          </app-field-component>
        }
      </div>
      <div class="button-container">
        <button mat-button matStepperPrevious><i class="fas fa-long-arrow-alt-left"></i> ANTERIOR</button>
        <button mat-button (click)="onSubmit()">GUARDAR <i class="fas fa-save"></i></button>
      </div>
    </form>
  </mat-step>
</mat-stepper>

<app-alert [singleMessage]="alertMessage" [severity]="alertSeverity" [open]="showAlert" (eventCloseToast)="showAlert = false"></app-alert>
