@for (tableKey of getTableKeys(); track tableKey) {
  <mat-card class="table-card">
    <mat-card-header>
      <mat-card-title>{{ tab[tableKey].title }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table class="odontogram-table">
        <thead>
          <tr>
            <th>SIGNO</th>
            @for (column of tab[tableKey].columns; track column) {
              <th>{{ column }}</th>
            }
          </tr>
        </thead>
        <tbody>
          @for (row of tab[tableKey].rows; track row.symbol; let rowIndex = $index) {
            <tr>
              <td>{{ row.symbol }}</td>
              @for (column of tab[tableKey].columns; track column; let columnIndex = $index) {
                <td>
                  @if (row.symbol === 'P. B.' || row.symbol === 'N. I.') {
                    <!-- Inputs numéricos para P. B. y N. I. -->
                    <input
                      type="text"
                      [value]="row.values[columnIndex * 3 + 0] || ''"
                      (input)="onInputChange(tableKey, row, $event, columnIndex, 0)"
                    />
                    <input
                      type="text"
                      [value]="row.values[columnIndex * 3 + 1] || ''"
                      (input)="onInputChange(tableKey, row, $event, columnIndex, 1)"
                    />
                    <input
                      type="text"
                      [value]="row.values[columnIndex * 3 + 2] || ''"
                      (input)="onInputChange(tableKey, row, $event, columnIndex, 2)"
                    />
                  } @else if (row.symbol === 'M. D.') {
                    <!-- Input numérico para M. D. -->
                    <input
                      type="text"
                      [value]="row.values[columnIndex] || ''"
                      (input)="onInputChange(tableKey, row, $event, columnIndex, 0)"
                    />
                  } @else if (row.symbol === 'SANGRA' || row.symbol === 'PLACA' || row.symbol === 'CALCULO') {
                    <!-- Checkboxes para SANGRA, PLACA y CALCULO -->
                    <section class="example-section">
                      <mat-checkbox
                        [checked]="row.values[columnIndex * 3 + 0] || false"
                        (change)="onInputChange(tableKey, row, $event, columnIndex, 0)"
                      ></mat-checkbox>
                      <mat-checkbox
                        [checked]="row.values[columnIndex * 3 + 1] || false"
                        (change)="onInputChange(tableKey, row, $event, columnIndex, 1)"
                      ></mat-checkbox>
                      <mat-checkbox
                        [checked]="row.values[columnIndex * 3 + 2] || false"
                        (change)="onInputChange(tableKey, row, $event, columnIndex, 2)"
                      ></mat-checkbox>
                    </section>
                  }
                </td>
              }
            </tr>
          }
        </tbody>
      </table>
    </mat-card-content>
  </mat-card>
}

<div class="custom-textarea">
  <mat-form-field class="example-full-width">
    <mat-label>Observaciones</mat-label>
    <textarea
      matInput
      placeholder="Anotar observaciones ..."
      [(ngModel)]="notes" 
    ></textarea>
  </mat-form-field>
</div>

<div class="button-container">
  <button type="button" mat-button (click)="previousTab()"><i class="fas fa-long-arrow-alt-left"></i> ANTERIOR </button>
  <div>
    <button type="button" mat-button (click)="sendDataPeriodontogram()"> AVANZAR Y GUARDAR <i class="fas fa-save"></i></button>
  </div>
</div>