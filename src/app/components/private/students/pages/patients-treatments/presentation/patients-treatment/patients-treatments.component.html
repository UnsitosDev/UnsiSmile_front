<mat-card class="full-width-card">
    <mat-card-title><strong>Tratamientos - Consulta y administración</strong></mat-card-title>
</mat-card>

@if (!treatments || treatments.content.length === 0) {
  <div class="flex justify-center p-6">
    <span>No hay tratamientos registrados</span>
  </div>
}
<div class="p-4">
  <mat-list>
      @for (treatment of treatments?.content; track $index) {
          <section>
              <div>
                <mat-list-item>
                  <span matListItemTitle>{{treatment.patient.name}}</span>
                  {{treatment.treatment.name}}
                </mat-list-item>

                <!-- Estados del tratamiento -->
                @switch (treatment.status) {
                  @case (STATUS.IN_REVIEW) {
                    <button mat-stroked-button class="mr-1" disabled>
                      <span class="in-review"> <i class="far fa-clock mr-1"></i>En revisión</span>
                    </button>
                  }
                  @case (STATUS.APPROVED) {
                    <button mat-stroked-button class="mr-1" disabled>
                      <span class="approved"><i class="fas fa-check-circle mr-1"></i>Aprobado</span>
                    </button>
                  }
                  @case (STATUS.REJECTED) {
                    <button mat-stroked-button class="mr-1" disabled><span class="rejected"><i
                      class="fas fa-times-circle mr-1"></i>Rechazado</span></button>
                  }
                  @case (STATUS.IN_PROGRESS) {
                    <button mat-stroked-button class="mr-1" disabled>
                      <span class="in-progress"><i class="fas fa-solid fa-spinner mr-1"></i>En progreso</span>
                    </button>
                  }
                  @case (STATUS.FINISHED) {
                    <button mat-stroked-button class="mr-1" disabled>
                      <span class="finished"> <i class="fas fa-user-check mr-1"></i>Finalizado</span>
                    </button>
                  }
                }

                <button mat-stroked-button matTooltip="Ver tratamiento">
                  <span (click)="navigateToTreatmentDetails(treatment)"><i
                    class="fas fa-eye cursor-pointer mr-1"></i>
                  Ver tratamiento
                </span>
                </button>
              </div>
              <mat-divider></mat-divider>
            </section>
      }
  </mat-list>
</div>

@if (!isLastPage) {
    <div class="text-center mt-3">
        <button
          class="btn btn-primary"
          (click)="loadMoreTreatments()"
          [disabled]="isLoading">
          @if (!isLoading) {
            <span>Cargar más tratamientos</span>

          }
        </button>
    </div>
}

<app-loading/>
